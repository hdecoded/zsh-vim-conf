"use strict";var l=Object.defineProperty;var w=Object.getOwnPropertyDescriptor;var f=Object.getOwnPropertyNames;var p=Object.prototype.hasOwnProperty;var d=(r,n)=>{for(var e in n)l(r,e,{get:n[e],enumerable:!0})},h=(r,n,e,o)=>{if(n&&typeof n=="object"||typeof n=="function")for(let s of f(n))!p.call(r,s)&&s!==e&&l(r,s,{get:()=>n[s],enumerable:!(o=w(n,s))||o.enumerable});return r};var P=r=>h(l({},"__esModule",{value:!0}),r);var b={};d(b,{default:()=>c});module.exports=P(b);var a=require("@raycast/api");var i=[{name:"Google Search",url:"google.com",allowParams:["q","ie"]},{name:"Baidu Search",url:"baidu.com",allowParams:["wd","ie"]},{name:"Bing Search",url:"bing.com",allowParams:["q"]},{name:"Netease Music",url:"music.163.com",allowParams:["id"]},{name:"Youtube",url:"youtube.com",allowParams:["v","search_query"]}];function u(r){let n=/(https?:\/\/[^\s]+)/g,e=r.match(n);return e||[]}function y(r,n){let e=u(r);for(let o of e)r=r.replace(o,n.shift()||o);return r}function R(r,n){let e=r.split("?");if(e.length<2)return r;let o=e[1].split("&");if(n.length>0){let s=o.filter(t=>n.includes(t.split("=")[0]));return`${e[0]}?${s.join("&")}`}return e[0]}async function c(){let r=await a.Clipboard.readText();if(r===void 0){await(0,a.showHUD)("Clipboard is empty");return}let n=u(r);if(n.length===0){await(0,a.showHUD)("No URL found");return}console.log("raw urls",n);let e=[];for(let s of n){let t=i.find(g=>s.includes(g.url))?.allowParams||[];console.log("allow params",t);let m=R(s,t);e.push(m)}console.log("new urls",e);let o=y(r,e);console.log("new text",o),await a.Clipboard.copy(o),await(0,a.showHUD)("Removed tracking parameters")}
